a,b=component,debug;for c,d in component.list()do if d~="computer"then _G[d]=component.proxy(c)end end;e,f,g,h,i=drone,modem,computer,eeprom,leash;j,k,l,n,o,q,r,s,t,u=e.setLightColor,e.getLightColor,e.inventorySize,e.getAcceleration,e.setAcceleration,e.select,e.setStatusText,g.getDeviceInfo,g.uptime,f.address;v,w,x,y,z,A=tonumber,tostring,math,true,false,table;j(0x42dff4)if g.getArchitecture()=="Lua 5.2"then g.setArchitecture("Lua 5.3")end;pc=""p=0;m=""B,C,D,E,F,G,H,I,J=0,0,z,z,z,"",v(s()[u].width),v(s()[u].capacity)-128,setmetatable({},{__index=_G,__metatable=""})function K(...)f.send(pc,p,...)end;function L(M)for N=1,M.n do if type(M[N])=="table"then if serialization then M[N]=serialization.serialize(M[N],y).."\t"else M[N]=w(M[N])end else M[N]=w(M[N])end end;O=A.concat(M,",  ")return O end;function print(P,...)M=A.pack(...)K("print",P,L(M):sub(1,I))end;function Q()K("data",n(),B,C,e.count(),k(),g.energy()/(g.maxEnergy()/100),D)end;function R()j(0xffffff)r("I'm ready!")Q()end;function S(u,T)if T then pc=""h.set(h.get():gsub('pc="([0-9a-f%-]+)"','pc=""',1))S()elseif#pc>=1 then f.open(p)R()else if u then pc=u;h.set(h.get():gsub('pc=""','pc="'..u..'"',1):gsub("p=%d+","p="..p))K("OK")R()else p=x.floor(x.random(65534))f.close()f.open(p)j(0xe0b714)r("Pair Me!\n"..w(p))end end end;function U(V,W,X)e.move(V,W,X)while e.getOffset()>.7 or e.getVelocity()>.7 do sleep(.1,y)end end;function Y(Z,_)return type(Z)=="number"and Z or _ end;function a0()K("ping")a1=select(5,pull(3,y))return Y(a1,0)end;function a2()if a0()>5 then a3=k()j(0x0094ff)Q()repeat F=y;a4=a0()U(1,0,0)a5=a0()U(-1,1,0)a6=a0()U(0,-1,1)a7=a0()U(0,0,-1)V=(a4*a4-a5*a5+1)/2;W=(a4*a4-a6*a6+1)/2;X=(a4*a4-a7*a7+1)/2-1;if x.ceil(a4)==x.ceil(a0())then F=z;U(V,W,X)end until a0()<=5;j(a3)Q()end end;function a8(slot)if l()>1 then if slot>l()then q(l())C=l()else q(slot)C=slot end end end;function a9(aa)return load(aa,"=stdin","t",J)end;function ab(aa,ac)if aa:sub(1,1)=="="then aa=aa:sub(2,#aa)end;ad,ae=a9("return "..aa)if not ad then ad,ae=a9(aa)if not ad then print(y,"Syntax error: "..ae)end end;if ad then E=y;af=A.pack(xpcall(ad,b.traceback))if af[1]then if af.n>1 then A.remove(af,1)print(z,A.unpack(af,1,af.n-1))end else if ac then ae=af[2]else ae=af[2]:match("(.+)\nstack")if not ae then if af[2]:match("stack")then ae="task failed succefully!"else ae=af[2]end end end;print(y,"Runtime error: "..ae)end;E=z end;K("r-end")end;function ag(aa,cmd)if not D then if cmd=="end"then D=true elseif cmd then m=aa;load(cmd)()else load(aa)()end end end;function pull(ah)ai=t()+Y(ah,x.huge)aj={g.pullSignal(ai-t())}if aj[1]=="modem_message"then if aj[3]==pc then if aj[6]=="chunk"then G=G..aj[7]elseif aj[6]=="d-end"then ak={}al,am=1,""while al<#G do am,al=string.unpack(">s2",G,al)table.insert(ak,am)end;if cmd[ak[1]]and not F then cmd[ak[1]](A.unpack(ak,2,#ak))end;G=""elseif aj[6]=="data"then Q()elseif cmd[aj[6]]and not F then cmd[aj[6]](A.unpack(aj,7,#aj))elseif aj[6]=="unpair"then S(z,true)elseif aj[6]=="strength"then f.setStrength(H/100*aj[7])elseif aj[6]=="interrupt"and E then error("interrupted")end elseif aj[5]<=5 and aj[6]=="pair"and#pc==0 then S(aj[3])end end;return A.unpack(aj,1,#aj)end;function sleep(ah)ai=t()+Y(ah,0)repeat pull(ai-t())until t()>=ai end;cmd={move=e.move,swing=function()e.swing(B)end,place=function()e.place(B)end,suck=function()if l()>1 then for N=1,l()do q(N)e.suck(B)end;q(C)end end,drop=function()if l()>1 then for N=1,l()do q(N)e.drop(B)end;q(C)end end,leash=function()if i then for N=0,5 do i.leash(N)end end end,unleash=function()if i then i.unleash()end end,shutboot=g.shutdown,acceleration=function()if n()+0.5<2.5 then o(n()+.5)else o(.5)end;Q()end,selectSide=function(an)B=an end,selectSlot=a8,light=function(ao)j(ao)Q()end,runCode=ab,goToMe=a2,goToCoords=function(V,W,X)U(0,W,0)U(V,0,X)U(0,-W,0)end,module=ag}U,distance,a2,slot=U,a0,a2,a8;f.setWakeMessage("shutboot")a8(1)S()while y do pull()end
