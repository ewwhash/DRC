a,b=component,debug;for c,d in component.list()do if d~="computer"then _G[d]=component.proxy(c)end end;e,f,g,h,i=drone,modem,computer,eeprom,leash;j,k,l,m,n,o,p,q,r,s=e.setLightColor,e.getLightColor,e.inventorySize,e.getAcceleration,e.setAcceleration,e.select,e.setStatusText,g.getDeviceInfo,g.uptime,f.address;t,u,v,w,x,y=tonumber,tostring,math,true,false,table;j(0x42dff4)if g.getArchitecture()=="Lua 5.2"then g.setArchitecture("Lua 5.3")end;module=""z,A,B,C,D,E,F,G,H,I,J=0,0,0,x,x,x,"","",t(q()[s].width),t(q()[s].capacity)-128,setmetatable({},{__index=_G,__metatable=""})function K(...)f.send(F,B,...)end;function L(M)for N=1,M.n do if type(M[N])=="table"then if serialization then M[N]=serialization.serialize(M[N],w).."\t"else M[N]=u(M[N])end else M[N]=u(M[N])end end;return y.concat(M,",  ")end;function print(O,...)M=y.pack(...)K("print",O,L(M):sub(1,I))end;function P()K("data",m(),z,A,e.count(),k(),g.energy()/(g.maxEnergy()/100),C)end;function Q()j(0xffffff)p("I'm ready!")P()end;function R(s,S)if S then F=""h.setData()R()else if s then F=s;h.setData(s..","..B)K("OK")Q()else G=h.getData()T=tonumber(G:match(",(%d+)"))if T then F,B=G:match("([%w%p+]+),"),T;modem.broadcast(1,"Порт: "..T,G)f.open(B)Q()else B=v.floor(v.random(65535))f.close()f.open(B)j(0xe0b714)p("Pair Me!\n"..u(B))end end end end;function U(V,W,X)e.move(V,W,X)while e.getOffset()>.7 or e.getVelocity()>.7 do sleep(.1,w)end end;function Y(Z,_)return type(Z)=="number"and Z or _ end;function a0()K("ping")return Y(select(5,pull(3,w)),0)end;function a1()if a0()>5 then a2=k()j(0x0094ff)P()repeat E=w;a3=a0()U(1,0,0)a4=a0()U(-1,1,0)a5=a0()U(0,-1,1)a6=a0()U(0,0,-1)V=(a3*a3-a4*a4+1)/2;W=(a3*a3-a5*a5+1)/2;X=(a3*a3-a6*a6+1)/2-1;if v.ceil(a3)==v.ceil(a0())then E=x;U(V,W,X)end until a0()<=5;j(a2)P()end end;function a7(slot)if l()>1 then if slot>l()then o(l())A=l()else o(slot)A=slot end end end;function a8(a9)return load(a9,"=stdin","t",J)end;function aa(a9,ab)if a9:sub(1,1)=="="then a9=a9:sub(2,#a9)end;ac,ad=a8("return "..a9)if not ac then ac,ad=a8(a9)if not ac then print(w,"Syntax error: "..ad)end end;if ac then D=w;ae=y.pack(xpcall(ac,b.traceback))if ae[1]then if ae.n>1 then y.remove(ae,1)print(x,y.unpack(ae,1,ae.n-1))end else if ab then ad=ae[2]else ad=ae[2]:match("(.+)\nstack")if not ad then if ae[2]:match("stack")then ad="task failed succefully!"else ad=ae[2]end end end;print(w,"Runtime error: "..ad)end;D=x end;K("r-end")end;function af(a9,cmd)if not C then if cmd=="end"then C=true elseif cmd then module=a9;load(cmd)()else load(a9)()end end end;function pull(ag)ah=r()+Y(ag,v.huge)ai={g.pullSignal(ah-r())}if ai[1]=="modem_message"then if ai[3]==F then if ai[6]=="chunk"then G=G..ai[7]elseif ai[6]=="d-end"then aj={}ak,al=1,""while ak<#G do al,ak=string.unpack(">s2",G,ak)table.insert(aj,al)end;if cmd[aj[1]]and not E then cmd[aj[1]](y.unpack(aj,2,#aj))end;G=""elseif ai[6]=="data"then P()elseif cmd[ai[6]]and not E then cmd[ai[6]](y.unpack(ai,7,#ai))elseif ai[6]=="unpair"then R(x,true)elseif ai[6]=="strength"then f.setStrength(H/100*ai[7])elseif ai[6]=="interrupt"and D then error("interrupted")end elseif ai[5]<=5 and ai[6]=="pair"and#F==0 then R(ai[3])end end;return y.unpack(ai,1,#ai)end;function sleep(ag)ah=r()+Y(ag,0)repeat pull(ah-r())until r()>=ah end;cmd={move=e.move,swing=function()e.swing(z)end,place=function()e.place(z)end,suck=function()if l()>1 then for N=1,l()do o(N)e.suck(z)end;o(A)end end,drop=function()if l()>1 then for N=1,l()do o(N)e.drop(z)end;o(A)end end,leash=function()if i then for am=0,5 do i.leash(am)end end end,unleash=function()if i then i.unleash()end end,shutboot=g.shutdown,acceleration=function()if m()+0.5<2.5 then n(m()+.5)else n(.5)end;P()end,selectSide=function(am)z=am end,selectSlot=a7,light=function(an)j(an)P()end,runCode=aa,goToMe=a1,goToCoords=function(V,W,X)U(0,W,0)U(V,0,X)U(0,-W,0)end,module=af}U,distance,a1,slot=U,a0,a1,a7;f.setWakeMessage("shutboot")a7(1)R()while w do pull()end
